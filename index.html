<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Carish</title>
</head>

<body>
  <canvas id="canvas" width="1000" height="600" style="border:1px solid lightgrey;">
    HTML5 Canvas support is required.
  </canvas>
  <script>
    "use strict";
    let canvas;
    let context;
    let oldTimeStamp;
    let firstRender = true;

    window.onload = init;

    function init() {
      canvas = document.getElementById('canvas');
      context = canvas.getContext('2d');

      window.requestAnimationFrame(stepFrame);
    }

    function stepFrame(timeStamp) {
      let fpsText = '';

      let millisecondsPassed = timeStamp - oldTimeStamp;
      oldTimeStamp = timeStamp;

      context.fillStyle = 'white';
      context.fillRect(0, 0, 1000, 800);

      let fps = Math.round(1000 / millisecondsPassed);

      fpsText = 'FPS: ' + fps
        + ' Βίβλος γενέσεως Ἰησοῦ '
        + 'בְּרֵאשִׁ֖ית בָּרָ֣א אֱלֹהִ֑ים';

      let textMetrics = context.measureText(fpsText);
      context.fillStyle = '#ddffdd';
      context.fillRect(
        0, 0,
        Math.abs(textMetrics.actualBoundingBoxLeft) + Math.abs(textMetrics.actualBoundingBoxRight),
        Math.abs(textMetrics.actualBoundingBoxAscent) + Math.abs(textMetrics.actualBoundingBoxDescent));
      if (firstRender) {
        console.log(textMetrics);
        firstRender = false;
      }

      context.font = '30px SBL Hebrew';
      context.fillStyle = 'black';
      context.fillText(fpsText, 0, textMetrics.actualBoundingBoxAscent);

      draw();

      window.requestAnimationFrame(stepFrame);
    }

    function draw() {
      let randomColor = Math.random() > 0.5 ? '#ff8080' : '#ff8080';
      context.fillStyle = randomColor;
      context.fillRect(100, 50, 200, 175);
    }
  </script>
</body>

</html>